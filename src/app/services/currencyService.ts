import axios from 'axios'

interface CurrencyRates {
  [key: string]: {
    code: string
    value: number
  }
}

const mockResult = {
  meta: { last_updated_at: '2024-07-23T23:59:59Z' },
  data: {
    ADA: { code: 'ADA', value: 0.4360415229 },
    AED: { code: 'AED', value: 0.6571113288 },
    AFN: { code: 'AFN', value: 12.6597700765 },
    ALL: { code: 'ALL', value: 16.5281110634 },
    AMD: { code: 'AMD', value: 69.4138693553 },
    ANG: { code: 'ANG', value: 0.3197132223 },
    AOA: { code: 'AOA', value: 156.2372187724 },
    ARB: { code: 'ARB', value: 0.2235585383 },
    ARS: { code: 'ARS', value: 165.6306404692 },
    AUD: { code: 'AUD', value: 0.270604632 },
    AVAX: { code: 'AVAX', value: 0.0059927229 },
    AWG: { code: 'AWG', value: 0.320339536 },
    AZN: { code: 'AZN', value: 0.3042330789 },
    BAM: { code: 'BAM', value: 0.3223833002 },
    BBD: { code: 'BBD', value: 0.3579212693 },
    BDT: { code: 'BDT', value: 21.0997085372 },
    BGN: { code: 'BGN', value: 0.321862555 },
    BHD: { code: 'BHD', value: 0.0672891986 },
    BIF: { code: 'BIF', value: 515.5442494313 },
    BMD: { code: 'BMD', value: 0.1789606346 },
    BNB: { code: 'BNB', value: 0.0003069688 },
    BND: { code: 'BND', value: 0.2406466026 },
    BOB: { code: 'BOB', value: 1.2410904108 },
    BRL: { code: 'BRL', value: 1 },
    BSD: { code: 'BSD', value: 0.1789606346 },
    BTC: { code: 'BTC', value: 0.0000027135 },
    BTN: { code: 'BTN', value: 14.9996666518 },
    BWP: { code: 'BWP', value: 2.4276712282 },
    BYN: { code: 'BYN', value: 0.5851964063 },
    BYR: { code: 'BYR', value: 5851.9673487068 },
    BZD: { code: 'BZD', value: 0.3579212693 },
    CAD: { code: 'CAD', value: 0.2466990675 },
    CDF: { code: 'CDF', value: 506.7431064285 },
    CHF: { code: 'CHF', value: 0.1595291207 },
    CLF: { code: 'CLF', value: 0.0044382245 },
    CLP: { code: 'CLP', value: 169.3980021365 },
    CNY: { code: 'CNY', value: 1.301829668 },
    COP: { code: 'COP', value: 718.1091557741 },
    CRC: { code: 'CRC', value: 94.6418970785 },
    CUC: { code: 'CUC', value: 0.1789606346 },
    CUP: { code: 'CUP', value: 4.2950552312 },
    CVE: { code: 'CVE', value: 18.1869395708 },
    CZK: { code: 'CZK', value: 4.1839194598 },
    DAI: { code: 'DAI', value: 0.1787900414 },
    DJF: { code: 'DJF', value: 31.8050629476 },
    DKK: { code: 'DKK', value: 1.2306426411 },
    DOP: { code: 'DOP', value: 10.5844063893 },
    DOT: { code: 'DOT', value: 0.0302180765 },
    DZD: { code: 'DZD', value: 24.1620044856 },
    EGP: { code: 'EGP', value: 8.653953934 },
    ERN: { code: 'ERN', value: 2.6844095195 },
    ETB: { code: 'ETB', value: 10.3400696932 },
    ETH: { code: 'ETH', value: 0.0000513804 },
    EUR: { code: 'EUR', value: 0.164924779 },
    FJD: { code: 'FJD', value: 0.40259529 },
    FKP: { code: 'FKP', value: 0.1387196404 },
    GBP: { code: 'GBP', value: 0.1387106143 },
    GEL: { code: 'GEL', value: 0.4859927123 },
    GGP: { code: 'GGP', value: 0.1387195886 },
    GHS: { code: 'GHS', value: 2.756067605 },
    GIP: { code: 'GIP', value: 0.138719647 },
    GMD: { code: 'GMD', value: 10.2748060562 },
    GNF: { code: 'GNF', value: 1539.2769906636 },
    GTQ: { code: 'GTQ', value: 1.3857120558 },
    GYD: { code: 'GYD', value: 37.3796684828 },
    HKD: { code: 'HKD', value: 1.3971548836 },
    HNL: { code: 'HNL', value: 4.4306972699 },
    HRK: { code: 'HRK', value: 1.1742467722 },
    HTG: { code: 'HTG', value: 24.0088690447 },
    HUF: { code: 'HUF', value: 64.334732263 },
    IDR: { code: 'IDR', value: 2896.9689824791 },
    ILS: { code: 'ILS', value: 0.6490617145 },
    IMP: { code: 'IMP', value: 0.1387196892 },
    INR: { code: 'INR', value: 14.9744205876 },
    IQD: { code: 'IQD', value: 234.1075373298 },
    IRR: { code: 'IRR', value: 7515.8264563542 },
    ISK: { code: 'ISK', value: 24.665662246 },
    JEP: { code: 'JEP', value: 0.1387195935 },
    JMD: { code: 'JMD', value: 27.8109071247 },
    JOD: { code: 'JOD', value: 0.1270620506 },
    JPY: { code: 'JPY', value: 27.8744365048 },
    KES: { code: 'KES', value: 23.7106449315 },
    KGS: { code: 'KGS', value: 15.0841399314 },
    KHR: { code: 'KHR', value: 733.838878578 },
    KMF: { code: 'KMF', value: 81.1868685124 },
    KPW: { code: 'KPW', value: 161.0701535953 },
    KRW: { code: 'KRW', value: 247.4583459672 },
    KWD: { code: 'KWD', value: 0.0545686838 },
    KYD: { code: 'KYD', value: 0.1491332657 },
    KZT: { code: 'KZT', value: 84.7518484015 },
    LAK: { code: 'LAK', value: 3967.7670579681 },
    LBP: { code: 'LBP', value: 16026.2579042271 },
    LKR: { code: 'LKR', value: 54.2577392691 },
    LRD: { code: 'LRD', value: 34.9382346032 },
    LSL: { code: 'LSL', value: 3.2910434749 },
    LTC: { code: 'LTC', value: 0.002452326 },
    LTL: { code: 'LTL', value: 0.5695133909 },
    LVL: { code: 'LVL', value: 0.1159216248 },
    LYD: { code: 'LYD', value: 0.8642958905 },
    MAD: { code: 'MAD', value: 1.7620447986 },
    MATIC: { code: 'MATIC', value: 0.3356993957 },
    MDL: { code: 'MDL', value: 3.1609892825 },
    MGA: { code: 'MGA', value: 811.5038789768 },
    MKD: { code: 'MKD', value: 10.1617445118 },
    MMK: { code: 'MMK', value: 374.8716520784 },
    MNT: { code: 'MNT', value: 608.5759388163 },
    MOP: { code: 'MOP', value: 1.439002975 },
    MRO: { code: 'MRO', value: 63.8889157828 },
    MRU: { code: 'MRU', value: 7.0930171326 },
    MUR: { code: 'MUR', value: 8.327139906 },
    MVR: { code: 'MVR', value: 2.764736509 },
    MWK: { code: 'MWK', value: 310.2245584247 },
    MXN: { code: 'MXN', value: 3.2490969212 },
    MYR: { code: 'MYR', value: 0.8358823174 },
    MZN: { code: 'MZN', value: 11.3752742505 },
    NAD: { code: 'NAD', value: 3.2854670935 },
    NGN: { code: 'NGN', value: 274.4873411026 },
    NIO: { code: 'NIO', value: 6.5855999878 },
    NOK: { code: 'NOK', value: 1.971704399 },
    NPR: { code: 'NPR', value: 23.9174600519 },
    NZD: { code: 'NZD', value: 0.3006252841 },
    OMR: { code: 'OMR', value: 0.0685562506 },
    OP: { code: 'OP', value: 0.0954227856 },
    PAB: { code: 'PAB', value: 0.1787996049 },
    PEN: { code: 'PEN', value: 0.672079635 },
    PGK: { code: 'PGK', value: 0.6900598033 },
    PHP: { code: 'PHP', value: 10.4619110853 },
    PKR: { code: 'PKR', value: 49.8188864928 },
    PLN: { code: 'PLN', value: 0.7049564688 },
    PYG: { code: 'PYG', value: 1358.5658416921 },
    QAR: { code: 'QAR', value: 0.6513738781 },
    RON: { code: 'RON', value: 0.8196827554 },
    RSD: { code: 'RSD', value: 19.2336451709 },
    RUB: { code: 'RUB', value: 15.6307964386 },
    RWF: { code: 'RWF', value: 234.4168550013 },
    SAR: { code: 'SAR', value: 0.6708537101 },
    SBD: { code: 'SBD', value: 1.4897100241 },
    SCR: { code: 'SCR', value: 2.6596076838 },
    SDG: { code: 'SDG', value: 107.6448217318 },
    SEK: { code: 'SEK', value: 1.9267906811 },
    SGD: { code: 'SGD', value: 0.24076472 },
    SHP: { code: 'SHP', value: 0.1387106196 },
    SLL: { code: 'SLL', value: 4016.6625452065 },
    SOL: { code: 'SOL', value: 0.0010351605 },
    SOS: { code: 'SOS', value: 102.1803283795 },
    SRD: { code: 'SRD', value: 5.1895926332 },
    STD: { code: 'STD', value: 4080.7348762045 },
    STN: { code: 'STN', value: 4.0807320323 },
    SVC: { code: 'SVC', value: 1.565905553 },
    SYP: { code: 'SYP', value: 2326.8265004031 },
    SZL: { code: 'SZL', value: 3.2912370248 },
    THB: { code: 'THB', value: 6.4670550348 },
    TJS: { code: 'TJS', value: 1.9117687915 },
    TMT: { code: 'TMT', value: 0.6263622212 },
    TND: { code: 'TND', value: 0.5558554029 },
    TOP: { code: 'TOP', value: 0.4214738276 },
    TRY: { code: 'TRY', value: 5.8716438452 },
    TTD: { code: 'TTD', value: 1.2156743721 },
    TWD: { code: 'TWD', value: 5.8688268754 },
    TZS: { code: 'TZS', value: 480.9500255158 },
    UAH: { code: 'UAH', value: 7.4188410583 },
    UGX: { code: 'UGX', value: 661.0661552483 },
    USD: { code: 'USD', value: 0.1789606346 },
    USDC: { code: 'USDC', value: 0.178644911 },
    USDT: { code: 'USDT', value: 0.1787477096 },
    UYU: { code: 'UYU', value: 7.1874859599 },
    UZS: { code: 'UZS', value: 2252.2315926453 },
    VEF: { code: 'VEF', value: 653438.7340667516 },
    VES: { code: 'VES', value: 6.5343857673 },
    VND: { code: 'VND', value: 4536.5886554445 },
    VUV: { code: 'VUV', value: 21.453014668 },
    WST: { code: 'WST', value: 0.4937796506 },
    XAF: { code: 'XAF', value: 108.1725919165 },
    XAG: { code: 'XAG', value: 0.0061267825 },
    XAU: { code: 'XAU', value: 0.0000742903 },
    XCD: { code: 'XCD', value: 0.4831937135 },
    XDR: { code: 'XDR', value: 0.135020448 },
    XOF: { code: 'XOF', value: 108.1725897833 },
    XPD: { code: 'XPD', value: 0.000193268 },
    XPF: { code: 'XPF', value: 19.6644794317 },
    XPT: { code: 'XPT', value: 0.0001890279 },
    XRP: { code: 'XRP', value: 0.2988717009 },
    YER: { code: 'YER', value: 44.7165852893 },
    ZAR: { code: 'ZAR', value: 3.2938317416 },
    ZMK: { code: 'ZMK', value: 1610.8604644596 },
    ZMW: { code: 'ZMW', value: 4.6698047429 },
    ZWL: { code: 'ZWL', value: 6134.4209392263 },
  },
}

const CurrencyService = {
  apiKey: process.env.CURRENCY_API_API_KEY,
  baseUrl: process.env.CURRENCY_API_BASE_URL,
  baseCurrency: process.env.CURRENCY_API_BASE_CURRENCY,

  allCurrencyRates: {} as CurrencyRates,

  getAllCurrencyRates: async function () {
    try {
      const options = {
        method: 'GET',
        url: `${this.baseUrl}/latest`,
        params: {
          apikey: this.apiKey,
          base_currency: this.baseCurrency,
        },
      }
      // const response = await axios.request(options)
      this.allCurrencyRates = mockResult.data

      this.convertRate('BRL', 'CAD', 100)
    } catch (error) {
      console.error('Error fetching currency rates:', error)
    }
  },

  convertRate: function (fromCurrency: string, toCurrency: string, amount: number) {
    if (!this.allCurrencyRates[fromCurrency] || !this.allCurrencyRates[toCurrency]) {
      return 'One of the currencies not found'
    }
    const fromValue = this.allCurrencyRates[fromCurrency].value
    const toValue = this.allCurrencyRates[toCurrency].value

    return fromValue * amount * toValue
  },
}

export default CurrencyService
